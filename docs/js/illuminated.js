!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.illuminated={})}(this,function(t){"use strict";var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")},s=function(){function n(t,i){for(var o=0;o<i.length;o++){var n=i[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,i,o){return i&&n(t.prototype,i),o&&n(t,o),t}}(),i=function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)},a=function(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i},w=function(){function o(t,i){e(this,o),this.x=t||0,this.y=i||0}return s(o,[{key:"copy",value:function(){return new o(this.x,this.y)}},{key:"dot",value:function(t){return t.x*this.x+t.y*this.y}},{key:"sub",value:function(t){return new o(this.x-t.x,this.y-t.y)}},{key:"add",value:function(t){return new o(this.x+t.x,this.y+t.y)}},{key:"mul",value:function(t){return new o(this.x*t,this.y*t)}},{key:"inv",value:function(){return this.mul(-1)}},{key:"dist2",value:function(t){var i=this.x-t.x,o=this.y-t.y;return i*i+o*o}},{key:"normalize",value:function(){var t=Math.sqrt(this.length2());return new o(this.x/t,this.y/t)}},{key:"length2",value:function(){return this.x*this.x+this.y*this.y}},{key:"toString",value:function(){return this.x+","+this.y}},{key:"inBound",value:function(t,i){return t.x<this.x&&this.x<i.x&&t.y<this.y&&this.y<i.y}}]),o}(),o=(Math.PI,Math.sqrt(5),2*Math.PI);function v(t,i,o){var n=i[0];t.moveTo(n.x,n.y);for(var e=1,s=i.length;e<s;++e)n=i[e],t.lineTo(n.x,n.y);!o&&2<i.length&&(n=i[0],t.lineTo(n.x,n.y))}function r(t,i,o){var n="illujs_"+t,e=document.getElementById(n);null===e&&((e=document.createElement("canvas")).id=n,e.width=i,e.height=o,e.style.display="none",document.body.appendChild(e));var s=e.getContext("2d");return s.clearRect(0,0,e.width,e.height),e.width=i,e.height=o,{canvas:e,ctx:s,w:i,h:o}}var h=function(){var t=document.createElement("canvas");t.width=t.height=1;var n=t.getContext("2d");return function(t,i){n.clearRect(0,0,1,1),n.fillStyle=t,n.fillRect(0,0,1,1);var o=n.getImageData(0,0,1,1).data;return"rgba("+[o[0],o[1],o[2],i]+")"}}();function k(t,i){var o,n,e,s,a=k.epsilon||1e-6,r=[],h=t;"object"===(void 0===h?"undefined":x(h))&&"number"==typeof i&&(i=i=h);"number"==typeof i?e=(o=i)*o+(n=arguments[2])*n:(o=i.x,n=i.y,e=i.length2());var c=n*Math.sqrt(e-h*h),u=Math.acos((-h*o+c)/e),p=Math.acos((-h*o-c)/e),l=h*Math.cos(u),f=h*Math.sin(u),y=h*Math.cos(p),d=h*Math.sin(p);s=new w(o+y,n+d),r.push(s);var v=s.length2();s=new w(o+l,n-f),r.push(s);var g=s.length2();if(Math.abs(v-g)<a)return r;s=new w(o+y,n-d),r.push(s);var b=s.length2();if(Math.abs(g-b)<a)return[s,r[1]];if(Math.abs(v-b)<a)return[r[0],s];s=new w(o+l,n+f),r.push(s);var m=s.length2();return Math.abs(b-m)<a?[r[2],s]:Math.abs(g-m)<a?[r[1],s]:Math.abs(v-m)<a?[r[0],s]:r}var n=function(){function o(t){e(this,o);var i={position:new w,distance:100,diffuse:.8};this.options=Object.assign(i,t)}return s(o,[{key:"render",value:function(){}},{key:"mask",value:function(t){var i=this._getVisibleMaskCache();t.drawImage(i.canvas,Math.round(this.options.position.x-i.w/2),Math.round(this.options.position.y-i.h/2))}},{key:"bounds",value:function(){return{topleft:new w(this.options.position.x-this.options.distance,this.options.position.y-this.options.distance),bottomright:new w(this.options.position.x+this.options.distance,this.options.position.y+this.options.distance)}}},{key:"center",value:function(){return new w(this.options.distance,this.options.distance)}},{key:"forEachSample",value:function(t){t(this.options.position)}},{key:"_getVisibleMaskCache",value:function(){var t=Math.floor(1.4*this.options.distance),i=""+t;if(this.vismaskhash!=i){this.vismaskhash=i;var o=this._vismaskcache=r("vm"+this.id,2*t,2*t),n=o.ctx.createRadialGradient(t,t,0,t,t,t);n.addColorStop(0,"rgba(0,0,0,1)"),n.addColorStop(1,"rgba(0,0,0,0)"),o.ctx.fillStyle=n,o.ctx.fillRect(0,0,o.w,o.h)}return this._vismaskcache}},{key:"_getHashCache",value:function(){return[this.options.distance,this.options.diffuse].toString()}}]),o}(),c=function(){function o(t){e(this,o);var i={light:new n,objects:[]};this.options=Object.assign(i,this.options),this.options=Object.assign(this.options,t)}return s(o,[{key:"createCache",value:function(t,i){this._cache=r("lc",t,i),this._castcache=r("lcc",t,i)}},{key:"cast",value:function(t){var o=this.options.light,i=o.samples,n=this._castcache,e=n.ctx;e.clearRect(0,0,n.w,n.h),e.fillStyle="rgba(0,0,0,"+Math.round(100/i)/100+")";var s=o.bounds(),a=this.options.objects;o.forEachSample(function(i){for(var t=0,o=a.length;t<o;++t)if(a[t].contains(i))return void e.fillRect(s.topleft.x,s.topleft.y,s.bottomright.x-s.topleft.x,s.bottomright.y-s.topleft.y);a.forEach(function(t){t.cast(e,i,s)})}),a.forEach(function(t){var i=void 0===t.diffuse?.8:t.diffuse;i*=o.diffuse,e.fillStyle="rgba(0,0,0,"+(1-i)+")",e.beginPath(),t.path(e),e.fill()}),t.drawImage(n.canvas,0,0)}},{key:"compute",value:function(t,i){this._cache&&this._cache.w==t&&this._cache.h==i||this.createCache(t,i);var o=this._cache.ctx,n=this.options.light;o.save(),o.clearRect(0,0,o.canvas.width,o.canvas.height),n.render(o),o.globalCompositeOperation="destination-out",this.cast(o),o.restore()}},{key:"render",value:function(t){t.drawImage(this._cache.canvas,0,0)}},{key:"getCanvas",value:function(){return this._cache.canvas}}]),o}(),u=function(t){function o(t){e(this,o);var i=a(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return i.options=Object.assign({id:0,color:"rgba(250,220,150,0.8)",radius:0,samples:1,angle:0,roughness:0},i.options),i.options=Object.assign(i.options,t),i}return i(o,n),s(o,[{key:"_getHashCache",value:function(){return[this.options.color,this.options.distance,this.options.diffuse,this.options.angle,this.options.roughness,this.options.samples,this.options.radius].toString()}},{key:"center",value:function(){return new w((1-Math.cos(this.options.angle)*this.options.roughness)*this.options.distance,(1+Math.sin(this.options.angle)*this.options.roughness)*this.options.distance)}},{key:"bounds",value:function(){var t=new w(Math.cos(this.options.angle),-Math.sin(this.options.angle)).mul(this.options.roughness*this.options.distance);return{topleft:new w(this.options.position.x+t.x-this.options.distance,this.options.position.y+t.y-this.options.distance),bottomright:new w(this.options.position.x+t.x+this.options.distance,this.options.position.y+t.y+this.options.distance)}}},{key:"mask",value:function(t){var i=this._getVisibleMaskCache(),o=new w(Math.cos(this.options.angle),-Math.sin(this.options.angle)).mul(this.options.roughness*this.options.distance);t.drawImage(i.canvas,Math.round(this.options.position.x+o.x-i.w/2),Math.round(this.options.position.y+o.y-i.h/2))}},{key:"_getGradientCache",value:function(t){var i=this._getHashCache();if(this._cacheHashcode==i)return this._gcache;this._cacheHashcode=i;var o=Math.round(this.options.distance),n=2*o,e=r("gc"+this.id,n,n),s=e.ctx.createRadialGradient(t.x,t.y,0,o,o,o);return s.addColorStop(Math.min(1,this.options.radius/this.options.distance),this.options.color),s.addColorStop(1,h(this.options.color,0)),e.ctx.fillStyle=s,e.ctx.fillRect(0,0,e.w,e.h),this._gcache=e}},{key:"render",value:function(t){var i=this.center(),o=this._getGradientCache(i);t.drawImage(o.canvas,Math.round(this.options.position.x-i.x),Math.round(this.options.position.y-i.y))}}]),o}(),p=function(){function i(t){e(this,i);this.options=Object.assign({diffuse:.8},t),this.uniqueId=0}return s(i,[{key:"cast",value:function(){}},{key:"path",value:function(){}},{key:"bounds",value:function(){return{topleft:new w,bottomright:new w}}},{key:"contains",value:function(){return!1}}]),i}(),l=function(t){function n(t){e(this,n);var i=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),o={center:new w,radius:20};return i.options=Object.assign(o,i.options),i.options=Object.assign(i.options,t),i}return i(n,p),s(n,[{key:"cast",value:function(t,i,o){var n=this.options.center,e=n.sub(i),s=k(this.options.radius,e),a=s[0],r=s[1],h=a.add(i),c=r.add(i),u=(o.bottomright.x-o.topleft.x+(o.bottomright.y-o.topleft.y))/2;e=e.normalize().mul(u),a=a.normalize().mul(u),r=r.normalize().mul(u);var p=h.add(e),l=c.add(e),f=h.add(a),y=c.add(r),d=Math.atan2(e.x,-e.y);t.beginPath(),v(t,[c,y,l,p,f,h],!0),t.arc(n.x,n.y,this.options.radius,d,d+Math.PI),t.fill()}},{key:"path",value:function(t){t.arc(this.options.center.x,this.options.center.y,this.options.radius,0,o)}},{key:"bounds",value:function(){return{topleft:new w(this.options.center.x-this.options.radius,this.options.center.y-this.options.radius),bottomright:new w(this.options.center.x+this.options.radius,this.options.center.y+this.options.radius)}}},{key:"contains",value:function(t){return t.dist2(this.options.center)<this.options.radius*this.options.radius}}]),n}(),f=function(t){function o(t){e(this,o);var i=a(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return i.options=Object.assign({points:[]},i.options),i.options=Object.assign(i.options,t),i}return i(o,p),s(o,[{key:"bounds",value:function(){for(var t=this.options.points[0].copy(),i=t.copy(),o=1,n=this.options.points.length;o<n;++o){var e=this.options.points[o];e.x>i.x&&(i.x=e.x),e.y>i.y&&(i.y=e.y),e.x<t.x&&(t.x=e.x),e.y<t.y&&(t.y=e.y)}return{topleft:t,bottomright:i}}},{key:"contains",value:function(t){var i,o=this.options.points,n=o.length,e=n-1,s=t.x,a=t.y,r=!1;for(i=0;i<n;i++)(o[i].y<a&&o[e].y>=a||o[e].y<a&&o[i].y>=a)&&(o[i].x<=s||o[e].x<=s)&&o[i].x+(a-o[i].y)/(o[e].y-o[i].y)*(o[e].x-o[i].x)<s&&(r=!r),e=i;return r}},{key:"path",value:function(t){v(t,this.options.points)}},{key:"cast",value:function(p,l,t){var f=(t.bottomright.x-t.topleft.x+(t.bottomright.y-t.topleft.y))/2;this._forEachVisibleEdges(l,t,function(t,i,o,n,e){var s=o.inv().dot(e)/e.length2(),a=(s<0?t:1<s?i:t.add(e.mul(s))).sub(l);a=a.normalize().mul(f),o=o.normalize().mul(f),n=n.normalize().mul(f);var r=t.add(a),h=i.add(a),c=t.add(o),u=i.add(n);p.beginPath(),v(p,[t,i,u,h,r,c]),p.fill()})}},{key:"_forEachVisibleEdges",value:function(t,i,o){for(var n,e=this.options.points[this.options.points.length-1],s=0,a=this.options.points.length;s<a;++s,e=n)if(n=this.options.points[s],e.inBound(i.topleft,i.bottomright)){var r=e.sub(t),h=n.sub(t),c=n.sub(e);new w(c.y,-c.x).dot(r)<0&&o(e,n,r,h,c)}}}]),o}(),y=function(t){function n(t){e(this,n);var i=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t)),o={topleft:new w,bottomright:new w};return i.options=Object.assign(o,i.options),i.options=Object.assign(i.options,t),i.syncFromTopleftBottomright(),i}return i(n,f),s(n,[{key:"syncFromTopleftBottomright",value:function(){var t=this.options.topleft,i=new w(this.options.bottomright.x,this.options.topleft.y),o=this.options.bottomright,n=new w(this.options.topleft.x,this.options.bottomright.y);this.options.points=[t,i,o,n]}},{key:"fill",value:function(t){var i=this.options.points[0].x,o=this.options.points[0].y;t.rect(i,o,this.options.points[2].x-i,this.options.points[2].y-o)}}]),n}(),d=function(t){function n(t){e(this,n);var i=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t)),o={a:new w,b:new w};return i.options=Object.assign(o,i.options),i.options=Object.assign(i.options,t),i.syncFromAB(),i}return i(n,f),s(n,[{key:"syncFromAb",value:function(){this.options.points=[this.options.a,this.options.b]}}]),n}();t.Vec2=w,t.Lighting=c,t.Lamp=u,t.DiscObject=l,t.RectangleObject=y,t.LineObject=d,t.PolygonObject=f,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWxsdW1pbmF0ZWQuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9WZWMyLmpzIiwiLi4vc3JjL2hlbHBlcnMuanMiLCIuLi9zcmMvTGlnaHQuanMiLCIuLi9zcmMvTGlnaHRpbmcuanMiLCIuLi9zcmMvTGFtcC5qcyIsIi4uL3NyYy9PcGFxdWVPYmplY3QuanMiLCIuLi9zcmMvRGlzY09iamVjdC5qcyIsIi4uL3NyYy9Qb2x5Z29uT2JqZWN0LmpzIiwiLi4vc3JjL1JlY3RhbmdsZU9iamVjdC5qcyIsIi4uL3NyYy9MaW5lT2JqZWN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBWZWMyIHJlcHJlc2VudHMgYSAyZCBwb3NpdGlvbiBvciBhIDJkIHZlY3Rvci5cclxuICogXHJcbiAqIFZlYzIgaXMgYmFzZWQgb24gQm94MmTigJlzIFZlYzIgZXhjZXB0IHRoYXQgaW4gSWxsdW1pbmF0ZWQuanMgYSBWZWMyXHJcbiAqIHZlY3RvciBpcyBpbW11dGFibGUuIEl0IG1lYW5zIGV2ZXJ5IG1ldGhvZCBjcmVhdGVzIGEgbmV3IFZlYzIgaW5zdGFuY2UgYW5kXHJcbiAqIHlvdSBjYW4gc2FmZWx5IHVzZSBhIHNhbWUgVmVjMiBpbnN0YW5jZSBldmVyeXdoZXJlIGJlY2F1c2UgdGhlIGltbXV0YWJpbGl0eVxyXG4gKiBndWFyYW50ZWVzIHRoYXQgcHJvcGVydGllcyB3aWxsIG5vdCBiZSBtb2RpZmllZC5cclxuICovXHJcbmNsYXNzIFZlYzIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSB2ZWN0b3JcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB4IFRoZSBYIGNvb3JkaW5hdGUuXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0geSBUaGUgWSBjb29yZGluYXRlLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih4LCB5KSB7XHJcbiAgICAgICAgdGhpcy54ID0geCB8fCAwXHJcbiAgICAgICAgdGhpcy55ID0geSB8fCAwXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIHZlY3Rvci5cclxuICAgICAqIEByZXR1cm4ge1ZlYzJ9IENvcHkgb2YgdGhlIGN1cnJlbnQgdmVjdG9yLlxyXG4gICAgICovXHJcbiAgICBjb3B5KCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLngsIHRoaXMueSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHRoaXMgdmVjdG9yIGFuZCB0aGUgZ2l2ZW4gdmVjdG9yLlxyXG4gICAgICogQHBhcmFtIHtWZWMyfSB2IEEgdmVjdG9yIHRvIHVzZSB0byBjYWxjdWxhdGUgdGhlIHRoZSBkb3QgcHJvZHVjdC5cclxuICAgICAqIEByZXR1cm4ge051bWJlcn0gVGhlIGRvdCBwcm9kdWN0LlxyXG4gICAgICovXHJcbiAgICBkb3Qodikge1xyXG4gICAgICAgIHJldHVybiB2LnggKiB0aGlzLnggKyB2LnkgKiB0aGlzLnlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN1YnRyYWN0cyB0aGUgZ2l2ZW4gdmVjdG9yIGZyb20gdGhpcyB2ZWN0b3IuXHJcbiAgICAgKiBAcGFyYW0ge1ZlYzJ9IHYgQSB2ZWN0b3IgdG8gc3VidHJhY3QuXHJcbiAgICAgKiBAcmV0dXJuIHtWZWMyfSBUaGUgcmVzdWx0YW50IHZlY3RvclxyXG4gICAgICovXHJcbiAgICBzdWIodikge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLnggLSB2LngsIHRoaXMueSAtIHYueSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgdGhlIGdpdmVuIHZlY3RvciB0byB0aGlzIHZlY3Rvci5cclxuICAgICAqIEBwYXJhbSB7VmVjMn0gdiBBIHZlY3RvciB0byBhZGQuXHJcbiAgICAgKiBAcmV0dXJuIHtWZWMyfSBUaGUgcmVzdWx0YW50IHZlY3RvclxyXG4gICAgICovXHJcbiAgICBhZGQodikge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLnggKyB2LngsIHRoaXMueSArIHYueSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE11bHRpcGxpZXMgdGhlIGdpdmVuIHZlY3RvciB3aXRoIHRoaXMgdmVjdG9yLlxyXG4gICAgICogQHBhcmFtIHtWZWMyfSBuIEEgdmVjdG9yIHRvIG11bHRpcGx5LlxyXG4gICAgICogQHJldHVybiB7VmVjMn0gVGhlIHJlc3VsdGFudCB2ZWN0b3JcclxuICAgICAqL1xyXG4gICAgbXVsKG4pIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy54ICogbiwgdGhpcy55ICogbilcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhY2x1bGF0ZXMgdGhlIGludmVyc2Ugb2YgdGhpcyB2ZWN0b3IuXHJcbiAgICAgKiBAcmV0dXJuIHtWZWMyfSBBIG5ldyBpbnZlcnNlZCB2ZWN0b3IuXHJcbiAgICAgKi9cclxuICAgIGludigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdWwoLTEpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIHRoZSBnaXZlbiB2ZWN0b3IuXHJcbiAgICAgKiBAcGFyYW0ge1ZlYzJ9IHYgQSB2ZWN0b3Igd2l0aCB3aGljaCB0aGUgc3F1YXJlZCBkaXN0YW5jZSBpcyBjYWxjdWxhdGVkLlxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBUaGUgc3F1YXJlZCBkaXN0YW5jZS5cclxuICAgICAqL1xyXG4gICAgZGlzdDIodikge1xyXG4gICAgICAgIGxldCBkeCA9IHRoaXMueCAtIHYueFxyXG4gICAgICAgIGxldCBkeSA9IHRoaXMueSAtIHYueVxyXG4gICAgICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgbm9ybWFsaXplZCBmb3JtIG9mIHRoaXMgdmVjdG9yLlxyXG4gICAgICogQHJldHVybiB7VmVjMn0gVGhlIG5vcm1hbGl6ZWQgZm9ybS5cclxuICAgICAqL1xyXG4gICAgbm9ybWFsaXplKCkge1xyXG4gICAgICAgIGxldCBsZW5ndGggPSBNYXRoLnNxcnQodGhpcy5sZW5ndGgyKCkpXHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMueCAvIGxlbmd0aCwgdGhpcy55IC8gbGVuZ3RoKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgdGhpcyB2ZWN0b3IuXHJcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBzcXVhcmVkIGxlbmd0aC5cclxuICAgICAqL1xyXG4gICAgbGVuZ3RoMigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9kdWNlIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgdmVjdG9yLlxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyB2ZWN0b3IuXHJcbiAgICAgKi9cclxuICAgIHRvU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnggKyAnLCcgKyB0aGlzLnlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERldGVybWluZXMgaWYgdGhpcyB2ZWN0b3IgaXMgd2l0aGluIHRoZSBib3VuZHMgZGVmaW5lZCBieSB0aGUgZ2l2ZW4gdmVjdG9ycy5cclxuICAgICAqIEBwYXJhbSB7VmVjMn0gdG9wTGVmdCBUb3AtbGVmdCBvZiB0aGUgYm91bmRzXHJcbiAgICAgKiBAcGFyYW0ge1ZlYzJ9IGJvdHRvbVJpZ2h0IEJvdHRvbS1yaWdodCBvZiB0aGUgYm91bmRzXHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBXaGV0aGVyIHRoaXMgdmVjdG9yIGlzIHdpdGhpbmcgdGhlIHByb3ZpZGVkIGJvdW5kcy5cclxuICAgICAqL1xyXG4gICAgaW5Cb3VuZCh0b3BMZWZ0LCBib3R0b21SaWdodCkge1xyXG4gICAgICAgIHJldHVybiAodG9wTGVmdC54IDwgdGhpcy54ICYmIHRoaXMueCA8IGJvdHRvbVJpZ2h0LnggJiZcclxuICAgICAgICAgICAgdG9wTGVmdC55IDwgdGhpcy55ICYmIHRoaXMueSA8IGJvdHRvbVJpZ2h0LnkpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFZlYzIiLCJpbXBvcnQgVmVjMiBmcm9tICcuL1ZlYzIuanMnXHJcblxyXG5leHBvcnQgY29uc3QgR09MREVOX0FOR0xFID0gTWF0aC5QSSAqICgzIC0gTWF0aC5zcXJ0KDUpKVxyXG5leHBvcnQgY29uc3QgXzJQSSA9IDIgKiBNYXRoLlBJXHJcblxyXG4vKipcclxuICogRHJhdyBhIHBhdGggZGVmaW5lZCBieSB0aGUgZ2l2ZW4gcG9pbnRzIG9udG8gdGhlIGdpdmVuIGN0eC5cclxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGN0eCBUaGUgY29udGV4dCBvbnRvIHdoaWNoIHRoZSBwcm9wZXJ0aWVzIHNob3VsZCBiZSBkcmF3bi5cclxuICogQHBhcmFtIHtBcnJheX0gcG9pbnRzIEFuIGFycmF5IG9mIFZlYzIgb2JqZWN0cyB0aGF0IGRlZmluZSB0aGUgcGF0aC5cclxuICogQHBhcmFtIHtCb29sZWFufSBkb250Sm9pbkxhc3QgVHJ1ZSBpZiB0aGUgbGFzdCBwb2ludCBzaG91bGQgam9pbmVkIHdpdGggdGhlIGZpcnN0IHBvaW50IGluIHRoZSBwYXRoLlxyXG4gKi9cclxuZnVuY3Rpb24gcGF0aChjdHgsIHBvaW50cywgZG9udEpvaW5MYXN0KSB7XHJcbiAgICB2YXIgcCA9IHBvaW50c1swXVxyXG4gICAgY3R4Lm1vdmVUbyhwLngsIHAueSlcclxuICAgIGZvciAodmFyIGkgPSAxLCBsID0gcG9pbnRzLmxlbmd0aDsgaSA8IGw7ICsraSkge1xyXG4gICAgICAgIHAgPSBwb2ludHNbaV1cclxuICAgICAgICBjdHgubGluZVRvKHAueCwgcC55KVxyXG4gICAgfVxyXG4gICAgaWYgKCFkb250Sm9pbkxhc3QgJiYgcG9pbnRzLmxlbmd0aCA+IDIpIHtcclxuICAgICAgICBwID0gcG9pbnRzWzBdXHJcbiAgICAgICAgY3R4LmxpbmVUbyhwLngsIHAueSlcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBjYW52YXMgYW5kIGNvbnRleHQgd2l0aCB0aGUgZ2l2ZW4gd2lkdGggYW5kIGhlaWdodC5cclxuICogQHBhcmFtIHtOdW1iZXJ9IHcgV2lkdGggb2YgdGhlIGNhbnZhcyBjb250ZXh0LlxyXG4gKiBAcGFyYW0ge051bWJlcn0gaCBIZWlnaHQgb2YgdGhlIGNhbnZhcyBjb250ZXh0LlxyXG4gKiBAcmV0dXJuIHtPYmplY3R9IEFuIGFub255bW91cyBvYmplY3Qgd2l0aCBcImNhbnZhc1wiLCBcImN0eFwiLCBcIndcIiBhbmQgXCJoXCJcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dChpZCwgdywgaCkge1xyXG4gICAgdmFyIGlpZCA9ICdpbGx1anNfJyArIGlkXHJcbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWlkKVxyXG5cclxuICAgIGlmIChjYW52YXMgPT09IG51bGwpIHtcclxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxyXG4gICAgICAgIGNhbnZhcy5pZCA9IGlpZFxyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaFxyXG4gICAgICAgIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpXHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuXHJcbiAgICBjYW52YXMud2lkdGggPSB3XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gaFxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgY2FudmFzOiBjYW52YXMsXHJcbiAgICAgICAgY3R4OiBjdHgsXHJcbiAgICAgICAgdzogdyxcclxuICAgICAgICBoOiBoXHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhIENTUyBjb2xvciBzdHJpbmcgaW50byBSR0JBIGZvcm1hdC5cclxuICogQHBhcmFtIHtTdHJpbmd9IGNvbG9yIENvbG9yIGluIGFueSBDU1MgZm9ybWF0LlxyXG4gKiBAcGFyYW0ge051bWJlcn0gYWxwaGEgQWxwaGEgdmFsdWUgZm9yIHByb2R1Y2VkIGNvbG9yLlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IENvbG9yIGluIFJHQkEgZm9ybWF0LlxyXG4gKi9cclxudmFyIGdldFJHQkEgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgLy92YXIgY3R4ID0gY3JlYXRlQ2FudmFzQW5kMmRDb250ZXh0KCdncmdiYScsIDEsIDEpXHJcbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcclxuICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5oZWlnaHQgPSAxXHJcbiAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGNvbG9yLCBhbHBoYSkge1xyXG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgMSwgMSlcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3JcclxuICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgMSwgMSlcclxuICAgICAgICB2YXIgZCA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgMSwgMSkuZGF0YVxyXG4gICAgICAgIHJldHVybiAncmdiYSgnICsgW2RbMF0sIGRbMV0sIGRbMl0sIGFscGhhXSArICcpJ1xyXG4gICAgfVxyXG59KCkpXHJcblxyXG4vKipcclxuICogR2V0IHRhbmdlbnRzIGZyb20gKDAsMCkgdG8gY2lyY2xlIG9mIHJhZGl1cyB3aXRoIGdpdmVuIGNlbnRlciwgZm9yIERpc2NPYmplY3QuY2FzdFxyXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkaXVzIFxyXG4gKiBAcGFyYW0ge051bWJlcn0gY2VudGVyIFxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VGFuMihyYWRpdXMsIGNlbnRlcikge1xyXG4gICAgdmFyIGVwc2lsb24gPSBnZXRUYW4yLmVwc2lsb24gfHwgMWUtNiwgLy8gY29uc3RhbnRcclxuICAgICAgICB4MCwgeTAsIGxlbjIsIHNvbG4sXHJcbiAgICAgICAgc29sdXRpb25zID0gW10sXHJcbiAgICAgICAgYSA9IHJhZGl1c1xyXG4gICAgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgY2VudGVyID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgIHZhciB0bXAgPSBhXHJcbiAgICAgICAgY2VudGVyID0gYVxyXG4gICAgICAgIGNlbnRlciA9IHRtcCAvLyBzd2FwXHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNlbnRlciA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAvLyBnZXRUYW4yKHJhZGl1czpudW1iZXIsIHgwOm51bWJlciwgeTA6bnVtYmVyKVxyXG4gICAgICAgIHgwID0gY2VudGVyXHJcbiAgICAgICAgeTAgPSBhcmd1bWVudHNbMl1cclxuICAgICAgICBsZW4yID0geDAgKiB4MCArIHkwICogeTBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gZ2V0VGFuczIocmFkaXVzOm51bWJlciwgY2VudGVyOm9iamVjdD17eDp4MCx5OnkwfSlcclxuICAgICAgICB4MCA9IGNlbnRlci54XHJcbiAgICAgICAgeTAgPSBjZW50ZXIueVxyXG4gICAgICAgIGxlbjIgPSBjZW50ZXIubGVuZ3RoMigpXHJcbiAgICB9XHJcbiAgICAvLyB0ID0gKy8tIE1hdGguYWNvcyggKC1hKngwICsvLSB5MCAqIE1hdGguc3FydCh4MCp4MCArIHkwKnkwIC0gYSphKSkvKHgwKngwICsgeTAqeSkgKVxyXG4gICAgdmFyIGxlbjJhID0geTAgKiBNYXRoLnNxcnQobGVuMiAtIGEgKiBhKSxcclxuICAgICAgICB0dCA9IE1hdGguYWNvcygoLWEgKiB4MCArIGxlbjJhKSAvIGxlbjIpLFxyXG4gICAgICAgIG50ID0gTWF0aC5hY29zKCgtYSAqIHgwIC0gbGVuMmEpIC8gbGVuMiksXHJcbiAgICAgICAgdHRfY29zID0gYSAqIE1hdGguY29zKHR0KSxcclxuICAgICAgICB0dF9zaW4gPSBhICogTWF0aC5zaW4odHQpLFxyXG4gICAgICAgIG50X2NvcyA9IGEgKiBNYXRoLmNvcyhudCksXHJcbiAgICAgICAgbnRfc2luID0gYSAqIE1hdGguc2luKG50KVxyXG5cclxuICAgIC8vIE5vdGU6IGNvcygtdCkgPT0gY29zKHQpIGFuZCBzaW4oLXQpID09IC1zaW4odCkgZm9yIGFsbCB0LCBzbyBmaW5kXHJcbiAgICAvLyB4MCArIGEqY29zKHQpLCB5MCArLy0gYSpzaW4odClcclxuICAgIC8vIFNvbHV0aW9ucyBoYXZlIGVxdWFsIGxlbmd0aHNcclxuICAgIHNvbG4gPSBuZXcgVmVjMih4MCArIG50X2NvcywgeTAgKyBudF9zaW4pXHJcbiAgICBzb2x1dGlvbnMucHVzaChzb2xuKVxyXG4gICAgdmFyIGRpc3QwID0gc29sbi5sZW5ndGgyKClcclxuXHJcbiAgICBzb2xuID0gbmV3IFZlYzIoeDAgKyB0dF9jb3MsIHkwIC0gdHRfc2luKVxyXG4gICAgc29sdXRpb25zLnB1c2goc29sbilcclxuICAgIHZhciBkaXN0MSA9IHNvbG4ubGVuZ3RoMigpXHJcbiAgICBpZiAoTWF0aC5hYnMoZGlzdDAgLSBkaXN0MSkgPCBlcHNpbG9uKSByZXR1cm4gc29sdXRpb25zXHJcblxyXG4gICAgc29sbiA9IG5ldyBWZWMyKHgwICsgbnRfY29zLCB5MCAtIG50X3NpbilcclxuICAgIHNvbHV0aW9ucy5wdXNoKHNvbG4pXHJcbiAgICB2YXIgZGlzdDIgPSBzb2xuLmxlbmd0aDIoKVxyXG4gICAgLy8gQ2hhbmdlZCBvcmRlciBzbyBubyBzdHJhbmdlIFggb2YgbGlnaHQgaW5zaWRlIHRoZSBjaXJjbGUuIENvdWxkIGFsc28gc29ydCByZXN1bHRzLlxyXG4gICAgaWYgKE1hdGguYWJzKGRpc3QxIC0gZGlzdDIpIDwgZXBzaWxvbikgcmV0dXJuIFtzb2xuLCBzb2x1dGlvbnNbMV1dXHJcbiAgICBpZiAoTWF0aC5hYnMoZGlzdDAgLSBkaXN0MikgPCBlcHNpbG9uKSByZXR1cm4gW3NvbHV0aW9uc1swXSwgc29sbl1cclxuXHJcbiAgICBzb2xuID0gbmV3IFZlYzIoeDAgKyB0dF9jb3MsIHkwICsgdHRfc2luKVxyXG4gICAgc29sdXRpb25zLnB1c2goc29sbilcclxuICAgIHZhciBkaXN0MyA9IHNvbG4ubGVuZ3RoMigpXHJcbiAgICBpZiAoTWF0aC5hYnMoZGlzdDIgLSBkaXN0MykgPCBlcHNpbG9uKSByZXR1cm4gW3NvbHV0aW9uc1syXSwgc29sbl1cclxuICAgIGlmIChNYXRoLmFicyhkaXN0MSAtIGRpc3QzKSA8IGVwc2lsb24pIHJldHVybiBbc29sdXRpb25zWzFdLCBzb2xuXVxyXG4gICAgaWYgKE1hdGguYWJzKGRpc3QwIC0gZGlzdDMpIDwgZXBzaWxvbikgcmV0dXJuIFtzb2x1dGlvbnNbMF0sIHNvbG5dXHJcblxyXG4gICAgLy8gcmV0dXJuIGFsbCA0IHNvbHV0aW9ucyBpZiBubyBtYXRjaGluZyB2ZWN0b3IgbGVuZ3RocyBmb3VuZC5cclxuICAgIHJldHVybiBzb2x1dGlvbnNcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICAgIGNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dCxcclxuICAgIGdldFJHQkEsXHJcbiAgICBnZXRUYW4yLFxyXG4gICAgcGF0aFxyXG59IiwiaW1wb3J0IFZlYzIgZnJvbSAnLi9WZWMyLmpzJ1xyXG5pbXBvcnQgeyBjcmVhdGVDYW52YXNBbmQyZENvbnRleHQgfSBmcm9tICcuL2hlbHBlcnMuanMnXHJcblxyXG4vKipcclxuICogQWJzdHJhY3QgY2xhc3MgZm9yIGxpZ2h0IG9iamVjdHMuXHJcbiAqL1xyXG5jbGFzcyBMaWdodCB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBuZXcgaW5zdGFuY2Ugb2YgbGlnaHQgYnV0IHByZXZlbnQgZGlyZWN0IGluc3RhbnRpYXRpb24uXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIHRvIGJlIGFwcGxpZWQgdG8gdGhpcyBsaWdodC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICAvKiogXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSBwb3NpdGlvblxyXG4gICAgICAgICAgICAgKiBAdHlwZSBWZWMyXHJcbiAgICAgICAgICAgICAqIEBkZWZhdWx0IG5ldyBWZWMyKDAsIDApXHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjMigpLFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEludGVuc2l0eSBvZiB0aGlzIGxpZ2h0LlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgZGlzdGFuY2VcclxuICAgICAgICAgICAgICogQHR5cGUgTnVtYmVyXHJcbiAgICAgICAgICAgICAqIEBkZWZhdWx0IDEwMFxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBkaXN0YW5jZTogMTAwLFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEhvdyBkaWZmdXNlIHRoaXMgbGlnaHQgaXMuXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSBkaWZmdXNlXHJcbiAgICAgICAgICAgICAqIEB0eXBlIE51bWJlclxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCAwLjhcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGRpZmZ1c2U6IDAuOFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgb3B0aW9ucylcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlciB0aGUgbGlnaHQgb250byB0aGUgcHJvdmlkZWQgY29udGV4dC5cclxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjdHggVGhlIGNhbnZhcyBjb250ZXh0IG9uIHdoaWNoIHRvIHJlbmRlciB0aGUgbGlnaHQuXHJcbiAgICAgKi9cclxuICAgIHJlbmRlcigpIHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgYSBtYXNrIHJlcHJlc2VudGluZyB0aGUgdmlzaWJpbGl0eS4gKFVzZWQgYnkgRGFya01hc2suKVxyXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGN0eCBUaGUgY2FudmFzIGNvbnRlY3Qgb24gd2hpY2ggdG8gcmVuZGVyIHRoZSBtYXNrLlxyXG4gICAgICovXHJcbiAgICBtYXNrKGN0eCkge1xyXG4gICAgICAgIHZhciBjID0gdGhpcy5fZ2V0VmlzaWJsZU1hc2tDYWNoZSgpXHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZShcclxuICAgICAgICAgICAgYy5jYW52YXMsXHJcbiAgICAgICAgICAgIE1hdGgucm91bmQodGhpcy5vcHRpb25zLnBvc2l0aW9uLnggLSBjLncgLyAyKSxcclxuICAgICAgICAgICAgTWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMucG9zaXRpb24ueSAtIGMuaCAvIDIpXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlIHRoZSBib3VuZGFyaWVzIG9mIHRoaXMgbGlnaHQgdXNpbmcgdGhlIGxpZ2h0J3MgZGlzdGFuY2UuXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEFuIGFub255bW91cyBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjb3JuZXJzIG9mIHRoZSBib3VuZGFyeS5cclxuICAgICAqL1xyXG4gICAgYm91bmRzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcGxlZnQ6IG5ldyBWZWMyKHRoaXMub3B0aW9ucy5wb3NpdGlvbi54IC0gdGhpcy5vcHRpb25zLmRpc3RhbmNlLCB0aGlzLm9wdGlvbnMucG9zaXRpb24ueSAtIHRoaXMub3B0aW9ucy5kaXN0YW5jZSksXHJcbiAgICAgICAgICAgIGJvdHRvbXJpZ2h0OiBuZXcgVmVjMih0aGlzLm9wdGlvbnMucG9zaXRpb24ueCArIHRoaXMub3B0aW9ucy5kaXN0YW5jZSwgdGhpcy5vcHRpb25zLnBvc2l0aW9uLnkgKyB0aGlzLm9wdGlvbnMuZGlzdGFuY2UpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRoZSBjZW50ZXIgb2YgdGhpcyBsaWdodC5cclxuICAgICAqIGkuZS4gVGhlIHBvc2l0aW9uIHdoZXJlIHRoZSBsaWdodCBpbnRlbnNpdHkgaXMgdGhlIGhpZ2hlc3QuXHJcbiAgICAgKiBAcmV0dXJuIHtWZWMyfSBBIHZlY3RvciB0aGF0IHJlcHJlc2VudHMgdGhlIGNlbnRlciBvZiB0aGlzIGxpZ2h0LlxyXG4gICAgICovXHJcbiAgICBjZW50ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMub3B0aW9ucy5kaXN0YW5jZSwgdGhpcy5vcHRpb25zLmRpc3RhbmNlKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlIGEgZnVuY3Rpb24gZm9yIGV2ZXJ5IHNhbXBsZSBnZW5lcmF0ZWQgYnkgdGhpcyBsaWdodC5cclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGYgRnVuY3Rpb24gdG8gYmUgY2FsbGVkIGZvciBldmVyeSBzYW1wbGUgd2l0aCBhIHZlY3RvciByZXByZXNlbnRpbmcgaXRzIHBvc2l0aW9uLlxyXG4gICAgICovXHJcbiAgICBmb3JFYWNoU2FtcGxlKGYpIHtcclxuICAgICAgICBmKHRoaXMub3B0aW9ucy5wb3NpdGlvbilcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjYW52YXMgY29udGV4dCB3aXRoIHRoZSB2aXNpYmxlIG1hc2sgcmVuZGVyZWQgb250byBpdC5cclxuICAgICAqIEByZXR1cm4ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gQSBjYW52YXMgY29udGV4dCB3aXRoIHRoZSB2aXNpYmxlIG1hc2sgcmVuZGVyZWQgb250byBpdC5cclxuICAgICAqL1xyXG4gICAgX2dldFZpc2libGVNYXNrQ2FjaGUoKSB7XHJcbiAgICAgICAgdmFyIGQgPSBNYXRoLmZsb29yKHRoaXMub3B0aW9ucy5kaXN0YW5jZSAqIDEuNClcclxuICAgICAgICB2YXIgaGFzaCA9ICcnICsgZFxyXG4gICAgICAgIGlmICh0aGlzLnZpc21hc2toYXNoICE9IGhhc2gpIHtcclxuICAgICAgICAgICAgdGhpcy52aXNtYXNraGFzaCA9IGhhc2hcclxuICAgICAgICAgICAgdmFyIGMgPSB0aGlzLl92aXNtYXNrY2FjaGUgPSBjcmVhdGVDYW52YXNBbmQyZENvbnRleHQoJ3ZtJyArIHRoaXMuaWQsIDIgKiBkLCAyICogZClcclxuICAgICAgICAgICAgdmFyIGcgPSBjLmN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudChkLCBkLCAwLCBkLCBkLCBkKVxyXG4gICAgICAgICAgICBnLmFkZENvbG9yU3RvcCgwLCAncmdiYSgwLDAsMCwxKScpXHJcbiAgICAgICAgICAgIGcuYWRkQ29sb3JTdG9wKDEsICdyZ2JhKDAsMCwwLDApJylcclxuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gZ1xyXG4gICAgICAgICAgICBjLmN0eC5maWxsUmVjdCgwLCAwLCBjLncsIGMuaClcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Zpc21hc2tjYWNoZVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGEgc3RyaW5nIGhhc2gga2V5IHJlcHJlc2VudGluZyB0aGlzIGxpZ2h0LlxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBUaGUgaGFzaCBrZXkuXHJcbiAgICAgKi9cclxuICAgIF9nZXRIYXNoQ2FjaGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFt0aGlzLm9wdGlvbnMuZGlzdGFuY2UsIHRoaXMub3B0aW9ucy5kaWZmdXNlXS50b1N0cmluZygpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExpZ2h0IiwiaW1wb3J0IHsgY3JlYXRlQ2FudmFzQW5kMmRDb250ZXh0IH0gZnJvbSAnLi9oZWxwZXJzLmpzJ1xyXG5pbXBvcnQgTGlnaHQgZnJvbSAnLi9MaWdodC5qcydcclxuXHJcbi8qKlxyXG4gKiBEZWZpbmVzIHRoZSBsaWdodGluZyBvZiBvbmUgbGlnaHQgdGhyb3VnaCBhIHNldCBvZiBvcGFxdWUgb2JqZWN0cy5cclxuICovXHJcbmNsYXNzIExpZ2h0aW5nIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIExpZ2h0aW5nLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyB0byBiZSBhcHBsaWVkIHRvIHRoZSBMaWdodGluZy5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVGhlIHNvdXJjZSBvZiB0aGUgbGlnaHRpbmcuXHJcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSBsaWdodFxyXG4gICAgICAgICAgICAgKiBAdHlwZSBMaWdodFxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCBuZXcgTGlnaHQoKVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgbGlnaHQ6IG5ldyBMaWdodCgpLFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEFuIGFycmF5IG9mIHt7I2Nyb3NzTGluayBcImlsbHVtaW5hdGVkLk9wYXF1ZU9iamVjdFwifX17ey9jcm9zc0xpbmt9fSBvYmplY3RzXHJcbiAgICAgICAgICAgICAqIHdoaWNoIHN0b3AgdGhlIGxpZ2h0IGFuZCBjcmVhdGUgc2hhZG93cy5cclxuICAgICAgICAgICAgICogQHByb3BlcnR5IG9iamVjdHNcclxuICAgICAgICAgICAgICogQHR5cGUgQXJyYXlcclxuICAgICAgICAgICAgICogQGRlZmF1bHQgW11cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIG9iamVjdHM6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oZGVmYXVsdHMsIHRoaXMub3B0aW9ucylcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBjYWNoZXMgZm9yIGNhbnZhcyBjb250ZXh0cy5cclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB3IFdpZHRoIG9mIHRoZSBjb250ZXh0cy5cclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBoIEhlaWdodCBvZiB0aGUgY29udGV4dHMuXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZUNhY2hlKHcsIGgpIHtcclxuICAgICAgICB0aGlzLl9jYWNoZSA9IGNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dCgnbGMnLCB3LCBoKVxyXG4gICAgICAgIHRoaXMuX2Nhc3RjYWNoZSA9IGNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dCgnbGNjJywgdywgaClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXcgdGhlIHNoYWRvd3MgdGhhdCBhcmUgY2FzdCBieSB0aGUgb2JqZWN0cy4gWW91IHVzdWFsbHkgZG9uJ3QgaGF2ZSB0byB1c2VcclxuICAgICAqIGl0IGlmIHlvdSB1c2UgcmVuZGVyKCkuXHJcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlckNvbnRleHQyRH0gY3R4b3V0cHV0IFRoZSBjYW52YXMgY29udGV4dCBvbnRvIHdoaWNoIHRoZSBzaGFkb3dzIHdpbGwgYmUgZHJhd24uXHJcbiAgICAgKi9cclxuICAgIGNhc3QoY3R4b3V0cHV0KSB7XHJcbiAgICAgICAgdmFyIGxpZ2h0ID0gdGhpcy5vcHRpb25zLmxpZ2h0XHJcbiAgICAgICAgdmFyIG4gPSBsaWdodC5zYW1wbGVzXHJcbiAgICAgICAgdmFyIGMgPSB0aGlzLl9jYXN0Y2FjaGVcclxuICAgICAgICB2YXIgY3R4ID0gYy5jdHhcclxuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGMudywgYy5oKVxyXG4gICAgICAgIC8vIERyYXcgc2hhZG93cyBmb3IgZWFjaCBsaWdodCBzYW1wbGUgYW5kIG9iamVjdHNcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsJyArIE1hdGgucm91bmQoMTAwIC8gbikgLyAxMDAgKyAnKScgLy8gSXMgdGhlcmUgYW55IGJldHRlciB3YXk/XHJcbiAgICAgICAgdmFyIGJvdW5kcyA9IGxpZ2h0LmJvdW5kcygpXHJcbiAgICAgICAgdmFyIG9iamVjdHMgPSB0aGlzLm9wdGlvbnMub2JqZWN0c1xyXG4gICAgICAgIGxpZ2h0LmZvckVhY2hTYW1wbGUoZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIG8gPSAwLCBsID0gb2JqZWN0cy5sZW5ndGg7IG8gPCBsOyArK28pIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3RzW29dLmNvbnRhaW5zKHBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdChib3VuZHMudG9wbGVmdC54LCBib3VuZHMudG9wbGVmdC55LCBib3VuZHMuYm90dG9tcmlnaHQueCAtIGJvdW5kcy50b3BsZWZ0LngsIGJvdW5kcy5ib3R0b21yaWdodC55IC0gYm91bmRzLnRvcGxlZnQueSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0LmNhc3QoY3R4LCBwb3NpdGlvbiwgYm91bmRzKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gRHJhdyBvYmplY3RzIGRpZmZ1c2UgLSB0aGUgaW50ZW5zaXR5IG9mIHRoZSBsaWdodCBwZW5ldHJhdGlvbiBpbiBvYmplY3RzXHJcbiAgICAgICAgb2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChvYmplY3QpIHtcclxuICAgICAgICAgICAgdmFyIGRpZmZ1c2UgPSBvYmplY3QuZGlmZnVzZSA9PT0gdW5kZWZpbmVkID8gMC44IDogb2JqZWN0LmRpZmZ1c2VcclxuICAgICAgICAgICAgZGlmZnVzZSAqPSBsaWdodC5kaWZmdXNlXHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLDAsMCwnICsgKDEgLSBkaWZmdXNlKSArICcpJ1xyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKClcclxuICAgICAgICAgICAgb2JqZWN0LnBhdGgoY3R4KVxyXG4gICAgICAgICAgICBjdHguZmlsbCgpXHJcbiAgICAgICAgfSlcclxuICAgICAgICBjdHhvdXRwdXQuZHJhd0ltYWdlKGMuY2FudmFzLCAwLCAwKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZSB0aGUgc2hhZG93cyB0byBjYXN0LlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHcgV2lkdGggb2YgdGhlIGNhbnZhcyBjb250ZXh0LlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGggSGVpZ2h0IG9mIHRoZSBjYW52YXMgY29udGV4dC5cclxuICAgICAqL1xyXG4gICAgY29tcHV0ZSh3LCBoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSB8fCB0aGlzLl9jYWNoZS53ICE9IHcgfHwgdGhpcy5fY2FjaGUuaCAhPSBoKVxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNhY2hlKHcsIGgpXHJcbiAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2NhY2hlLmN0eFxyXG4gICAgICAgIHZhciBsaWdodCA9IHRoaXMub3B0aW9ucy5saWdodFxyXG4gICAgICAgIGN0eC5zYXZlKClcclxuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KVxyXG5cclxuICAgICAgICBsaWdodC5yZW5kZXIoY3R4KVxyXG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24tb3V0J1xyXG4gICAgICAgIHRoaXMuY2FzdChjdHgpXHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhd3MgdGhlIGxpZ2h0IGFuZCBzaGFkb3dzIG9udG8gdGhlIGdpdmVuIGNvbnRleHQuXHJcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlckNvbnRleHQyRH0gY3R4IFRoZSBjYW52YXMgY29udGV4dCBvbiB3aGljaCB0byBkcmF3LlxyXG4gICAgICovXHJcbiAgICByZW5kZXIoY3R4KSB7XHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLl9jYWNoZS5jYW52YXMsIDAsIDApXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsaWdodCBhbmQgc2hhZG93cyBvbnRvIHRoZSBnaXZlbiBjb250ZXh0IGFzIGNhbnZhcy5cclxuICAgICAqIEByZXR1cm4ge0NhbnZhc30gVGhlIHBpY3R1cmUgb2YgdGhlIGxpZ2h0IGFuZCBzaGFkb3cuXHJcbiAgICAgKi9cclxuICAgIGdldENhbnZhcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGUuY2FudmFzXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExpZ2h0aW5nIiwiaW1wb3J0IFZlYzIgZnJvbSAnLi9WZWMyJ1xyXG5pbXBvcnQgTGlnaHQgZnJvbSAnLi9MaWdodC5qcydcclxuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQW5kMmRDb250ZXh0LCBnZXRSR0JBIH0gZnJvbSAnLi9oZWxwZXJzLmpzJ1xyXG5cclxuLyoqXHJcbiAqIEEgY2lyY3VsYXIgbGlnaHQgcmVuZGVyZWQgYXMgYSByYWRpYWwgZ3JhZGllbnQuXHJcbiAqL1xyXG5jbGFzcyBMYW1wIGV4dGVuZHMgTGlnaHQge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIG5ldyBpbnN0YW5jZSBvZiBMYW1wXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIHRvIGJlIGFwcGxpZWQgdG8gTGFtcFxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIG5ldyBMYW1wKHtcclxuICAgICAqICAgICBwb3NpdGlvbjogbmV3IFZlYzIoMTIsIDM0KSxcclxuICAgICAqICAgICBkaXN0YW5jZTogMTAwLFxyXG4gICAgICogICAgIGRpZmZ1c2U6IDAuOCxcclxuICAgICAqICAgICBjb2xvcjogJ3JnYmEoMjUwLCAyMjAsIDE1MCwgMC44KScsXHJcbiAgICAgKiAgICAgcmFkaXVzOiAwLFxyXG4gICAgICogICAgIHNhbXBsZXM6IDEsXHJcbiAgICAgKiAgICAgYW5nbGU6IDAsXHJcbiAgICAgKiAgICAgcm91Z2huZXNzOiAwXHJcbiAgICAgKiB9KVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgc3VwZXIoKVxyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVGhlIGlkIG9mIHRoaXMgbGlnaHQgb2JqZWN0LlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgaWRcclxuICAgICAgICAgICAgICogQHR5cGUgTnVtYmVyXHJcbiAgICAgICAgICAgICAqIEBkZWZhdWx0IDBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlkOiAwLFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFRoZSBjb2xvciBlbWl0dGVkIGJ5IHRoZSBsYW1wLiBUaGUgY29sb3IgY2FuIGJlIHNwZWNpZmllZCBpbiBhbnkgQ1NTIGZvcm1hdC5cclxuICAgICAgICAgICAgICogQHByb3BlcnR5IGNvbG9yXHJcbiAgICAgICAgICAgICAqIEB0eXBlIFN0cmluZ1xyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCAncmdiYSgyNTAsMjIwLDE1MCwwLjgpJ1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY29sb3I6ICdyZ2JhKDI1MCwyMjAsMTUwLDAuOCknLFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFRoZSBzaXplIG9mIHRoZSBsYW1wLiBCaWdnZXIgbGFtcHMgY2FzdCBzbW9vdGhlciBzaGFkb3dzLlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgcmFkaXVzXHJcbiAgICAgICAgICAgICAqIEB0eXBlIE51bWJlclxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCAwXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICByYWRpdXM6IDAsXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVGhlIG51bWJlciBvZiBwb2ludHMgd2hpY2ggd2lsbCBiZSB1c2VkIGZvciBzaGFkb3cgcHJvamVjdGlvbi4gSXQgZGVmaW5lc1xyXG4gICAgICAgICAgICAgKiB0aGUgcXVhbGl0eSBvZiB0aGUgcmVuZGVyaW5nLlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgc2FtcGxlc1xyXG4gICAgICAgICAgICAgKiBAdHlwZSBOdW1iZXJcclxuICAgICAgICAgICAgICogQGRlZmF1bHQgMVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgc2FtcGxlczogMSxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBUaGUgYW5nbGUgb2YgdGhlIG9yaWVudGF0aW9uIG9mIHRoZSBsYW1wLlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgYW5nbGVcclxuICAgICAgICAgICAgICogQHR5cGUgTnVtYmVyXHJcbiAgICAgICAgICAgICAqIEBkZWZhdWx0IDBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGFuZ2xlOiAwLFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFRoZSByb3VnaG5lc3Mgb2YgdGhlIG9yaWVudGVkIGVmZmVjdC5cclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHJvdWdobmVzc1xyXG4gICAgICAgICAgICAgKiBAdHlwZSBOdW1iZXJcclxuICAgICAgICAgICAgICogQGRlZmF1bHQgMFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcm91Z2huZXNzOiAwXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oZGVmYXVsdHMsIHRoaXMub3B0aW9ucylcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIGEgaGFzaCBrZXkgcmVwcmVzZW50aW5nIHRoaXMgbGFtcC5cclxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gQSBoYXNoIGtleS5cclxuICAgICAqL1xyXG4gICAgX2dldEhhc2hDYWNoZSgpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuY29sb3IsXHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kaXN0YW5jZSxcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRpZmZ1c2UsXHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5hbmdsZSxcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJvdWdobmVzcyxcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnNhbXBsZXMsXHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5yYWRpdXNcclxuICAgICAgICBdLnRvU3RyaW5nKClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiB0aGUgY2VudGVyIG9mIHRoaXMgbGFtcC5cclxuICAgICAqIGkuZS4gVGhlIHBvc2l0aW9uIHdoZXJlIHRoZSBsYW1wIGludGVuc2l0eSBpcyB0aGUgaGlnaGVzdFxyXG4gICAgICogQHJldHVybiB7VmVjMn0gQSBuZXcgdmVjdG9yIHRoYXQgcmVwcmVzZW50cyB0aGUgY2VudGVyIG9mIHRoaXMgbGFtcC5cclxuICAgICAqL1xyXG4gICAgY2VudGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMihcclxuICAgICAgICAgICAgKDEgLSBNYXRoLmNvcyh0aGlzLm9wdGlvbnMuYW5nbGUpICogdGhpcy5vcHRpb25zLnJvdWdobmVzcykgKiB0aGlzLm9wdGlvbnMuZGlzdGFuY2UsXHJcbiAgICAgICAgICAgICgxICsgTWF0aC5zaW4odGhpcy5vcHRpb25zLmFuZ2xlKSAqIHRoaXMub3B0aW9ucy5yb3VnaG5lc3MpICogdGhpcy5vcHRpb25zLmRpc3RhbmNlXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlIHRoZSBib3VuZGFyaWVzIG9mIHRoaXMgbGFtcCBiYXNlZCBvbiBpdHMgcHJvcGVydGllcy5cclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQW4gYW5vbnltb3VzIG9iamVjdCB3aXRoIHRoZSBwcm9wZXJ0aWVzIHRvcGxlZnQgYW5kIGJvdHRvbXJpZ2h0IHJlcHJlc2VudGluZ1xyXG4gICAgICogICAgICAgICAgICAgICAgICB0aGUgY29ybmVycyBvZiB0aGUgYm91bmRyeS5cclxuICAgICAqL1xyXG4gICAgYm91bmRzKCkge1xyXG4gICAgICAgIHZhciBvcmllbnRhdGlvbkNlbnRlciA9IG5ldyBWZWMyKFxyXG4gICAgICAgICAgICBNYXRoLmNvcyh0aGlzLm9wdGlvbnMuYW5nbGUpLCAtTWF0aC5zaW4odGhpcy5vcHRpb25zLmFuZ2xlKVxyXG4gICAgICAgICkubXVsKHRoaXMub3B0aW9ucy5yb3VnaG5lc3MgKiB0aGlzLm9wdGlvbnMuZGlzdGFuY2UpXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG9wbGVmdDogbmV3IFZlYzIoXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMucG9zaXRpb24ueCArIG9yaWVudGF0aW9uQ2VudGVyLnggLSB0aGlzLm9wdGlvbnMuZGlzdGFuY2UsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMucG9zaXRpb24ueSArIG9yaWVudGF0aW9uQ2VudGVyLnkgLSB0aGlzLm9wdGlvbnMuZGlzdGFuY2VcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgYm90dG9tcmlnaHQ6IG5ldyBWZWMyKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnBvc2l0aW9uLnggKyBvcmllbnRhdGlvbkNlbnRlci54ICsgdGhpcy5vcHRpb25zLmRpc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnBvc2l0aW9uLnkgKyBvcmllbnRhdGlvbkNlbnRlci55ICsgdGhpcy5vcHRpb25zLmRpc3RhbmNlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgYSBtYXNrIHJlcHJlc2VudGluZyB0aGUgdmlzaWJpbGl0eS4gKFVzZWQgYnkgRGFya01hc2suKVxyXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJDb250ZXh0MkR9IGN0eCBUaGUgY2FudmFzIGNvbnRlY3QgdG8gcmVuZGVyIHRoZSBtYXNrIG9uLlxyXG4gICAgICovXHJcbiAgICBtYXNrKGN0eCkge1xyXG4gICAgICAgIHZhciBjID0gdGhpcy5fZ2V0VmlzaWJsZU1hc2tDYWNoZSgpXHJcbiAgICAgICAgdmFyIG9yaWVudGF0aW9uQ2VudGVyID0gbmV3IFZlYzIoXHJcbiAgICAgICAgICAgIE1hdGguY29zKHRoaXMub3B0aW9ucy5hbmdsZSksIC1NYXRoLnNpbih0aGlzLm9wdGlvbnMuYW5nbGUpXHJcbiAgICAgICAgKS5tdWwodGhpcy5vcHRpb25zLnJvdWdobmVzcyAqIHRoaXMub3B0aW9ucy5kaXN0YW5jZSlcclxuICAgICAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICAgICAgICBjLmNhbnZhcywgTWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMucG9zaXRpb24ueCArIG9yaWVudGF0aW9uQ2VudGVyLnggLSBjLncgLyAyKSxcclxuICAgICAgICAgICAgTWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMucG9zaXRpb24ueSArIG9yaWVudGF0aW9uQ2VudGVyLnkgLSBjLmggLyAyKVxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlcnMgdGhpcyBsYW1wJ3MgZ3JhZGllbnQgb250byBhIGNhY2hlZCBjYW52YXMgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxyXG4gICAgICogQHBhcmFtIHtWZWMyfSBjZW50ZXIgVGhlIGNlbnRlciBwb3NpdGlvbiBvZiB0aGUgZ3JhZGllbnQgdG8gcmVuZGVyLlxyXG4gICAgICovXHJcbiAgICBfZ2V0R3JhZGllbnRDYWNoZShjZW50ZXIpIHtcclxuICAgICAgICB2YXIgaGFzaGNvZGUgPSB0aGlzLl9nZXRIYXNoQ2FjaGUoKVxyXG4gICAgICAgIGlmICh0aGlzLl9jYWNoZUhhc2hjb2RlID09IGhhc2hjb2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nY2FjaGVcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY2FjaGVIYXNoY29kZSA9IGhhc2hjb2RlXHJcbiAgICAgICAgdmFyIGQgPSBNYXRoLnJvdW5kKHRoaXMub3B0aW9ucy5kaXN0YW5jZSlcclxuICAgICAgICB2YXIgRCA9IGQgKiAyXHJcbiAgICAgICAgdmFyIGNhY2hlID0gY3JlYXRlQ2FudmFzQW5kMmRDb250ZXh0KCdnYycgKyB0aGlzLmlkLCBELCBEKVxyXG4gICAgICAgIHZhciBnID0gY2FjaGUuY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KGNlbnRlci54LCBjZW50ZXIueSwgMCwgZCwgZCwgZClcclxuICAgICAgICBnLmFkZENvbG9yU3RvcChNYXRoLm1pbigxLCB0aGlzLm9wdGlvbnMucmFkaXVzIC8gdGhpcy5vcHRpb25zLmRpc3RhbmNlKSwgdGhpcy5vcHRpb25zLmNvbG9yKVxyXG4gICAgICAgIGcuYWRkQ29sb3JTdG9wKDEsIGdldFJHQkEodGhpcy5vcHRpb25zLmNvbG9yLCAwKSlcclxuICAgICAgICBjYWNoZS5jdHguZmlsbFN0eWxlID0gZ1xyXG4gICAgICAgIGNhY2hlLmN0eC5maWxsUmVjdCgwLCAwLCBjYWNoZS53LCBjYWNoZS5oKVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9nY2FjaGUgPSBjYWNoZVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyIHRoZSBsYW1wIG9udG8gdGhlIGdpdmVuIGNvbnRleHQgKHdpdGhvdXQgYW55IHNoYWRvd3MpLlxyXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJDb250ZXh0MkR9IGN0eCBUaGUgY2FudmFzIGNvbnRleHQgdG8gcmVuZGVyIHRoZSBsaWdodCBvbi5cclxuICAgICAqL1xyXG4gICAgcmVuZGVyKGN0eCkge1xyXG4gICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLmNlbnRlcigpXHJcbiAgICAgICAgdmFyIGMgPSB0aGlzLl9nZXRHcmFkaWVudENhY2hlKGNlbnRlcilcclxuICAgICAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICAgICAgICBjLmNhbnZhcyxcclxuICAgICAgICAgICAgTWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMucG9zaXRpb24ueCAtIGNlbnRlci54KSxcclxuICAgICAgICAgICAgTWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMucG9zaXRpb24ueSAtIGNlbnRlci55KVxyXG4gICAgICAgIClcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTGFtcCIsImltcG9ydCBWZWMyIGZyb20gJy4vVmVjMi5qcydcclxuXHJcbi8qKlxyXG4gKiBBYnN0cmFjdCBjbGFzcyBmb3Igb3BhcXVlIG9iamVjdHMuXHJcbiAqL1xyXG5jbGFzcyBPcGFxdWVPYmplY3Qge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFjZSBvZiBPcGFxdWUgb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyB0byBiZSBhcHBsaWVkIHRvIHRoaXMgT3BhcXVlT2JqZWN0LlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBIb3cgZGlmZnVzZSB0aGlzIG9wYXF1ZSBvYmplY3Qgc2hvdWxkIGJlLlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgZGlmZnVzZVxyXG4gICAgICAgICAgICAgKiBAdHlwZSBOdW1iZXJcclxuICAgICAgICAgICAgICogQGRlZmF1bHQgMC44XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBkaWZmdXNlOiAwLjhcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgb3B0aW9ucylcclxuICAgICAgICB0aGlzLnVuaXF1ZUlkID0gMFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlsbCBwcm92aWRlZCBjb250ZXh0IHdpdGggdGhlIHNoYWRvd3MgcHJvamVjdGVkIGJ5IHRoaXMgb3BhcXVlIG9iamVjdCBhdCB0aGUgb3JpZ2luXHJcbiAgICAgKiBwb2ludCwgY29uc3RyYWluZWQgYnkgdGhlIGdpdmVuIGJvdW5kcy5cclxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjdHggVGhlIGNhbnZhcyBjb250ZXh0IG9udG8gd2hpY2ggdGhlIHNoYWRvd3Mgd2lsbCBiZSBjYXN0LlxyXG4gICAgICogQHBhcmFtIHtWZWMyfSBvcmlnaW4gQSB2ZWN0b3IgdGhhdCByZXByZXNlbnRzIHRoZSBvcmlnaW4gZm9yIHRoZSBzaGFkb3dzIGNhc3QuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYm91bmRzIEFuIGFub255bW91cyBvYmplY3Qgd2l0aCB0aGUgcHJvcGVydGllcyB0b3BsZWZ0IGFuZCBib3R0b21yaWdodCByZXByZXNlbnRpbmdcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGNvcm5lcnMgb2YgdGhlIGJvdW5kcnkuXHJcbiAgICAgKi9cclxuICAgIGNhc3QoKSB7fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhdyB0aGUgcGF0aCBvZiB0aGUgb3BhcXVlIG9iamVjdCBzaGFwZSBvbnRvIHRoZSBjdHguXHJcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY3R4IFRoZSBjb250ZXh0IG9udG8gd2hpY2ggdGhlIHBhdGggd2lsbCBiZSBkcmF3bi5cclxuICAgICAqL1xyXG4gICAgcGF0aCgpIHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGJvdW5kYXJpZXMgb2YgdGhpcyBvcGFxdWUgb2JqZWN0LlxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBBbiBhbm9ueW1vdXMgb2JqZWN0IHdpdGggdGhlIHByb3BlcnRpZXMgdG9wbGVmdCBhbmQgYm90dG9tcmlnaHQgcmVwcmVzZW50aW5nXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgIHRoZSBjb3JuZXJzIG9mIHRoaXMgYm91bmRyeS5cclxuICAgICAqL1xyXG4gICAgYm91bmRzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcGxlZnQ6IG5ldyBWZWMyKCksXHJcbiAgICAgICAgICAgIGJvdHRvbXJpZ2h0OiBuZXcgVmVjMigpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lIGlmIHRoZSBnaXZlbiBwb2ludCBpcyBpbnNpZGUgdGhlIG9iamVjdC5cclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgdGhlIG9wYXF1ZSBvYmplY3QgY29udGFpbnMgdGhlIGdpdmVuIHBvaW50LlxyXG4gICAgICovXHJcbiAgICBjb250YWlucygpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgT3BhcXVlT2JqZWN0IiwiaW1wb3J0IFZlYzIgZnJvbSAnLi9WZWMyLmpzJ1xyXG5pbXBvcnQgeyBnZXRUYW4yLCBwYXRoLCBfMlBJIH0gZnJvbSAnLi9oZWxwZXJzLmpzJ1xyXG5pbXBvcnQgT3BhcXVlT2JqZWN0IGZyb20gJy4vT3BhcXVlT2JqZWN0LmpzJ1xyXG5cclxuLyoqXHJcbiAqIEEgY2lyY3VsYXIsIG9wYXF1ZSBvYmplY3QuXHJcbiAqL1xyXG5jbGFzcyBEaXNjT2JqZWN0IGV4dGVuZHMgT3BhcXVlT2JqZWN0IHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIERpc2NPYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIHRvIGJlIGFwcGxpZWQgdG8gdGhpcyBkaXNjIG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFBvc2l0aW9uIG9mIHRoZSBkaXNjIG9iamVjdC5cclxuICAgICAgICAgICAgICogQHByb3BlcnR5IGNlbnRlclxyXG4gICAgICAgICAgICAgKiBAdHlwZSBWZWMyXHJcbiAgICAgICAgICAgICAqIEBkZWZhdWx0IG5ldyBWZWMyKClcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNlbnRlcjogbmV3IFZlYzIoKSxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBTaXplIG9mIHRoZSBkaXNjIG9iamVjdC5cclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHJhZGl1c1xyXG4gICAgICAgICAgICAgKiBAdHlwZSBOdW1iZXJcclxuICAgICAgICAgICAgICogQGRlZmF1bHQgMjBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHJhZGl1czogMjBcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgdGhpcy5vcHRpb25zKVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlsbCBwcm92aWRlZCBjb250ZXh0IHdpdGggdGhlIHNoYWRvd3MgcHJvamVjdGVkIGJ5IHRoaXMgZGlzYyBvYmplY3QgZnJvbSB0aGUgb3JpZ2luXHJcbiAgICAgKiBwb2ludCwgY29uc3RyYWluZWQgYnkgdGhlIGdpdmVuIGJvdW5kcy5cclxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyQ29udGV4dDJEfSBjdHggVGhlIGNhbnZhcyBjb250ZXh0IG9udG8gd2hpY2ggdGhlIHNoYWRvd3Mgd2lsbCBiZSBjYXN0LlxyXG4gICAgICogQHBhcmFtIHtWZWMyfSBvcmlnaW4gQSB2ZWN0b3IgdGhhdCByZXByZXNlbnRzIHRoZSBvcmlnaW4gZm9yIHRoZSBjYXN0ZWQgc2hhZG93cy5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBib3VuZHMgQW4gYW5vbnltb3VzIG9iamVjdCB3aXRoIHByb3BlcnRpZXMgdG9wbGVmdCBhbmQgYm90dG9tIHJpZ2h0IHJlcHJlc2VudGluZ1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICB0aGUgY29ybmVycyBvZiB0aGUgYm91bmRhcnkuXHJcbiAgICAgKi9cclxuICAgIGNhc3QoY3R4LCBvcmlnaW4sIGJvdW5kcykge1xyXG4gICAgICAgIHZhciBtID0gdGhpcy5vcHRpb25zLmNlbnRlclxyXG4gICAgICAgIHZhciBvcmlnaW5Ub00gPSBtLnN1YihvcmlnaW4pXHJcbiAgICAgICAgdmFyIHRhbmdlbnRMaW5lcyA9IGdldFRhbjIodGhpcy5vcHRpb25zLnJhZGl1cywgb3JpZ2luVG9NKVxyXG4gICAgICAgIHZhciBvcmlnaW5Ub0EgPSB0YW5nZW50TGluZXNbMF1cclxuICAgICAgICB2YXIgb3JpZ2luVG9CID0gdGFuZ2VudExpbmVzWzFdXHJcbiAgICAgICAgdmFyIGEgPSBvcmlnaW5Ub0EuYWRkKG9yaWdpbilcclxuICAgICAgICB2YXIgYiA9IG9yaWdpblRvQi5hZGQob3JpZ2luKVxyXG4gICAgICAgIC8vIG5vcm1hbGl6ZSB0byBkaXN0YW5jZVxyXG4gICAgICAgIHZhciBkaXN0YW5jZSA9ICgoYm91bmRzLmJvdHRvbXJpZ2h0LnggLSBib3VuZHMudG9wbGVmdC54KSArIChib3VuZHMuYm90dG9tcmlnaHQueSAtIGJvdW5kcy50b3BsZWZ0LnkpKSAvIDJcclxuICAgICAgICBvcmlnaW5Ub00gPSBvcmlnaW5Ub00ubm9ybWFsaXplKCkubXVsKGRpc3RhbmNlKVxyXG4gICAgICAgIG9yaWdpblRvQSA9IG9yaWdpblRvQS5ub3JtYWxpemUoKS5tdWwoZGlzdGFuY2UpXHJcbiAgICAgICAgb3JpZ2luVG9CID0gb3JpZ2luVG9CLm5vcm1hbGl6ZSgpLm11bChkaXN0YW5jZSlcclxuICAgICAgICAvLyBwcm9qZWN0IHBvaW50c1xyXG4gICAgICAgIHZhciBvYW0gPSBhLmFkZChvcmlnaW5Ub00pXHJcbiAgICAgICAgdmFyIG9ibSA9IGIuYWRkKG9yaWdpblRvTSlcclxuICAgICAgICB2YXIgYXAgPSBhLmFkZChvcmlnaW5Ub0EpXHJcbiAgICAgICAgdmFyIGJwID0gYi5hZGQob3JpZ2luVG9CKVxyXG4gICAgICAgIHZhciBzdGFydCA9IE1hdGguYXRhbjIob3JpZ2luVG9NLngsIC1vcmlnaW5Ub00ueSlcclxuICAgICAgICBjdHguYmVnaW5QYXRoKClcclxuICAgICAgICBwYXRoKGN0eCwgW2IsIGJwLCBvYm0sIG9hbSwgYXAsIGFdLCB0cnVlKVxyXG4gICAgICAgIGN0eC5hcmMobS54LCBtLnksIHRoaXMub3B0aW9ucy5yYWRpdXMsIHN0YXJ0LCBzdGFydCArIE1hdGguUEkpXHJcbiAgICAgICAgY3R4LmZpbGwoKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhdyB0aGUgcGF0aCBvZiB0aGUgZGlzYyBvbnRvIHRoZSBjdHguXHJcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlckNvbnRleHQyRH0gY3R4IFRoZSBjb250ZXh0IG9udG8gd2hpY2ggdGhlIHBhdGggd2lsbCBiZSBkcmF3bi5cclxuICAgICAqL1xyXG4gICAgcGF0aChjdHgpIHtcclxuICAgICAgICBjdHguYXJjKHRoaXMub3B0aW9ucy5jZW50ZXIueCwgdGhpcy5vcHRpb25zLmNlbnRlci55LCB0aGlzLm9wdGlvbnMucmFkaXVzLCAwLCBfMlBJKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlIHRoZSBib3VuZGFyaWVzIG9mIHRoaXMgZGlzYyBvYmplY3QuXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEFuIGFub255bW91cyBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIHRvcGxlZnQgYW5kIGJvdHRvbSByaWdodCByZXByZXNlbnRpbmdcclxuICAgICAqICAgICAgICAgICAgICAgICAgdGhlIGNvcm5lcnMgb2YgdGhlIGJvdW5kYXJ5LlxyXG4gICAgICovXHJcbiAgICBib3VuZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG9wbGVmdDogbmV3IFZlYzIodGhpcy5vcHRpb25zLmNlbnRlci54IC0gdGhpcy5vcHRpb25zLnJhZGl1cywgdGhpcy5vcHRpb25zLmNlbnRlci55IC0gdGhpcy5vcHRpb25zLnJhZGl1cyksXHJcbiAgICAgICAgICAgIGJvdHRvbXJpZ2h0OiBuZXcgVmVjMih0aGlzLm9wdGlvbnMuY2VudGVyLnggKyB0aGlzLm9wdGlvbnMucmFkaXVzLCB0aGlzLm9wdGlvbnMuY2VudGVyLnkgKyB0aGlzLm9wdGlvbnMucmFkaXVzKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERldGVybWluZSBpZiB0aGUgZ2l2ZW4gcG9pbnQgaXMgaW5zaWRlIHRoZSBkaXNjLlxyXG4gICAgICogQHBhcmFtIHtWZWMyfSBwb2ludCBUaGUgcG9pbnQgdG8gYmUgY2hlY2tlZC5cclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgdGhlIGRpc2Mgb2JqZWN0IGNvbnRhaW5zIHRoZSBnaXZlbiBwb2ludC5cclxuICAgICAqL1xyXG4gICAgY29udGFpbnMocG9pbnQpIHtcclxuICAgICAgICByZXR1cm4gcG9pbnQuZGlzdDIodGhpcy5vcHRpb25zLmNlbnRlcikgPCB0aGlzLm9wdGlvbnMucmFkaXVzICogdGhpcy5vcHRpb25zLnJhZGl1c1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEaXNjT2JqZWN0IiwiaW1wb3J0IFZlYzIgZnJvbSAnLi9WZWMyLmpzJ1xyXG5pbXBvcnQgeyBwYXRoIH0gZnJvbSAnLi9oZWxwZXJzLmpzJ1xyXG5pbXBvcnQgT3BhcXVlT2JqZWN0IGZyb20gJy4vT3BhcXVlT2JqZWN0LmpzJ1xyXG5cclxuLyoqXHJcbiAqIEFuIG9wYXF1ZSBwb2x5Z29uIG9iamVjdFxyXG4gKi9cclxuY2xhc3MgUG9seWdvbk9iamVjdCBleHRlbmRzIE9wYXF1ZU9iamVjdCB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIG5ldyBQb2x5Z29uT2JqZWN0IGluc3RhbmNlLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyB0byBiZSBhcHBsaWVkIHRvIHRoZSBQb2x5Z29uT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgY29uc3QgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBBbiBhcnJheSBvZiBWZWMyIHBvaW50cyB0aGF0XHJcbiAgICAgICAgICAgICAqIGRlZmluZSB0aGUgcG9seWdvbi5cclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHBvaW50c1xyXG4gICAgICAgICAgICAgKiBAdHlwZSBBcnJheVxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCBbXVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcG9pbnRzOiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRzLCB0aGlzLm9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGJvdW5kYXJpZXMgb2YgdGhpcyBwb2x5Z29uIG9iamVjdC5cclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQW4gYW5vbnltb3VzIG9iamVjdCB3aXRoIHByb3BlcnRpZXMgdG9wbGVmdCBhbmQgYm90dG9tIHJpZ2h0IHJlcHJlc2VudGluZ1xyXG4gICAgICogICAgICAgICAgICAgICAgICB0aGUgY29ybmVycyBvZiB0aGUgYm91bmRhcnkuXHJcbiAgICAgKi9cclxuICAgIGJvdW5kcygpIHtcclxuICAgICAgICB2YXIgdG9wbGVmdCA9IHRoaXMub3B0aW9ucy5wb2ludHNbMF0uY29weSgpXHJcbiAgICAgICAgdmFyIGJvdHRvbXJpZ2h0ID0gdG9wbGVmdC5jb3B5KClcclxuICAgICAgICBmb3IgKHZhciBwID0gMSwgbCA9IHRoaXMub3B0aW9ucy5wb2ludHMubGVuZ3RoOyBwIDwgbDsgKytwKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2ludCA9IHRoaXMub3B0aW9ucy5wb2ludHNbcF1cclxuICAgICAgICAgICAgaWYgKHBvaW50LnggPiBib3R0b21yaWdodC54KVxyXG4gICAgICAgICAgICAgICAgYm90dG9tcmlnaHQueCA9IHBvaW50LnhcclxuICAgICAgICAgICAgaWYgKHBvaW50LnkgPiBib3R0b21yaWdodC55KVxyXG4gICAgICAgICAgICAgICAgYm90dG9tcmlnaHQueSA9IHBvaW50LnlcclxuICAgICAgICAgICAgaWYgKHBvaW50LnggPCB0b3BsZWZ0LngpXHJcbiAgICAgICAgICAgICAgICB0b3BsZWZ0LnggPSBwb2ludC54XHJcbiAgICAgICAgICAgIGlmIChwb2ludC55IDwgdG9wbGVmdC55KVxyXG4gICAgICAgICAgICAgICAgdG9wbGVmdC55ID0gcG9pbnQueVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b3BsZWZ0OiB0b3BsZWZ0LFxyXG4gICAgICAgICAgICBib3R0b21yaWdodDogYm90dG9tcmlnaHRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRlcm1pbmUgaWYgdGhlIGdpdmVuIHBvaW50IGlzIGluc2lkZSB0aGUgcG9seWdvbi5cclxuICAgICAqIEBwYXJhbSB7VmVjMn0gcCBUaGUgcG9pbnQgdG8gYmUgY2hlY2tlZC5cclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgdGhlIHBvbHlnb24gb2JqZWN0IGNvbnRhaW5zIHRoZSBnaXZlbiBwb2ludC5cclxuICAgICAqL1xyXG4gICAgY29udGFpbnMocCkge1xyXG4gICAgICAgIHZhciBwb2ludHMgPSB0aGlzLm9wdGlvbnMucG9pbnRzXHJcbiAgICAgICAgdmFyIGksIGwgPSBwb2ludHMubGVuZ3RoLFxyXG4gICAgICAgICAgICBqID0gbCAtIDFcclxuICAgICAgICB2YXIgeCA9IHAueCxcclxuICAgICAgICAgICAgeSA9IHAueVxyXG4gICAgICAgIHZhciBvZGROb2RlcyA9IGZhbHNlXHJcblxyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKChwb2ludHNbaV0ueSA8IHkgJiYgcG9pbnRzW2pdLnkgPj0geSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50c1tqXS55IDwgeSAmJiBwb2ludHNbaV0ueSA+PSB5KSAmJlxyXG4gICAgICAgICAgICAgICAgKHBvaW50c1tpXS54IDw9IHggfHwgcG9pbnRzW2pdLnggPD0geCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwb2ludHNbaV0ueCArICh5IC0gcG9pbnRzW2ldLnkpIC8gKHBvaW50c1tqXS55IC0gcG9pbnRzW2ldLnkpICogKHBvaW50c1tqXS54IC0gcG9pbnRzW2ldLngpIDwgeCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9kZE5vZGVzID0gIW9kZE5vZGVzXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaiA9IGlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9kZE5vZGVzXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3IHRoZSBwYXRoIG9mIHRoZSBwb2x5Z29uIG9udG8gdGhlIGN0eC5cclxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyQ29udGV4dDJEfSBjdHggVGhlIGNvbnRleHQgb250byB3aGljaCB0aGUgcGF0aCB3aWxsIGJlIGRyYXduLlxyXG4gICAgICovXHJcbiAgICBwYXRoKGN0eCkge1xyXG4gICAgICAgIHBhdGgoY3R4LCB0aGlzLm9wdGlvbnMucG9pbnRzKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlsbCBwcm92aWRlZCBjb250ZXh0IHdpdGggdGhlIHNoYWRvd3MgcHJvamVjdGVkIGJ5IHRoaXMgcG9seWdvbiBvYmplY3QgZnJvbSB0aGUgb3JpZ2luXHJcbiAgICAgKiBwb2ludCwgY29uc3RyYWluZWQgYnkgdGhlIGdpdmVuIGJvdW5kcy5cclxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyQ29udGV4dDJEfSBjdHggVGhlIGNhbnZhcyBjb250ZXh0IG9udG8gd2hpY2ggdGhlIHNoYWRvd3Mgd2lsbCBiZSBjYXN0LlxyXG4gICAgICogQHBhcmFtIHtWZWMyfSBvcmlnaW4gQSB2ZWN0b3IgdGhhdCByZXByZXNlbnRzIHRoZSBvcmlnaW4gZm9yIHRoZSBjYXN0ZWQgc2hhZG93cy5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBib3VuZHMgQW4gYW5vbnltb3VzIG9iamVjdCB3aXRoIHByb3BlcnRpZXMgdG9wbGVmdCBhbmQgYm90dG9tIHJpZ2h0IHJlcHJlc2VudGluZ1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICB0aGUgY29ybmVycyBvZiB0aGUgYm91bmRhcnkuXHJcbiAgICAgKi9cclxuICAgIGNhc3QoY3R4LCBvcmlnaW4sIGJvdW5kcykge1xyXG4gICAgICAgIC8vIFRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIHByb2plY3Rpb24gaXMgYSBiaXQgaGFja3kuLi4gZG8geW91IGhhdmUgYSBwcm9wZXIgc29sdXRpb24/XHJcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gKChib3VuZHMuYm90dG9tcmlnaHQueCAtIGJvdW5kcy50b3BsZWZ0LngpICsgKGJvdW5kcy5ib3R0b21yaWdodC55IC0gYm91bmRzLnRvcGxlZnQueSkpIC8gMlxyXG4gICAgICAgIHRoaXMuX2ZvckVhY2hWaXNpYmxlRWRnZXMob3JpZ2luLCBib3VuZHMsIGZ1bmN0aW9uIChhLCBiLCBvcmlnaW5Ub0EsIG9yaWdpblRvQiwgYVRvQikge1xyXG4gICAgICAgICAgICB2YXIgbSAvLyBtIGlzIHRoZSBwcm9qZWN0ZWQgcG9pbnQgb2Ygb3JpZ2luIHRvIFthLCBiXVxyXG4gICAgICAgICAgICB2YXIgdCA9IG9yaWdpblRvQS5pbnYoKS5kb3QoYVRvQikgLyBhVG9CLmxlbmd0aDIoKVxyXG4gICAgICAgICAgICBpZiAodCA8IDApXHJcbiAgICAgICAgICAgICAgICBtID0gYVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0ID4gMSlcclxuICAgICAgICAgICAgICAgIG0gPSBiXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG0gPSBhLmFkZChhVG9CLm11bCh0KSlcclxuICAgICAgICAgICAgdmFyIG9yaWdpblRvTSA9IG0uc3ViKG9yaWdpbilcclxuICAgICAgICAgICAgLy8gbm9ybWFsaXplIHRvIGRpc3RhbmNlXHJcbiAgICAgICAgICAgIG9yaWdpblRvTSA9IG9yaWdpblRvTS5ub3JtYWxpemUoKS5tdWwoZGlzdGFuY2UpXHJcbiAgICAgICAgICAgIG9yaWdpblRvQSA9IG9yaWdpblRvQS5ub3JtYWxpemUoKS5tdWwoZGlzdGFuY2UpXHJcbiAgICAgICAgICAgIG9yaWdpblRvQiA9IG9yaWdpblRvQi5ub3JtYWxpemUoKS5tdWwoZGlzdGFuY2UpXHJcbiAgICAgICAgICAgIC8vIHByb2plY3QgcG9pbnRzXHJcbiAgICAgICAgICAgIHZhciBvYW0gPSBhLmFkZChvcmlnaW5Ub00pXHJcbiAgICAgICAgICAgIHZhciBvYm0gPSBiLmFkZChvcmlnaW5Ub00pXHJcbiAgICAgICAgICAgIHZhciBhcCA9IGEuYWRkKG9yaWdpblRvQSlcclxuICAgICAgICAgICAgdmFyIGJwID0gYi5hZGQob3JpZ2luVG9CKVxyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKClcclxuICAgICAgICAgICAgcGF0aChjdHgsIFthLCBiLCBicCwgb2JtLCBvYW0sIGFwXSlcclxuICAgICAgICAgICAgY3R4LmZpbGwoKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnZva2UgYSBmdW5jdGlvbiBmb3IgZWFjaCBvZiB0aGUgdmlzaWJsZSBlZGdlcyBpbiB0aGlzIHBvbHlnb24uXHJcbiAgICAgKiBAcGFyYW0ge1ZlYzJ9IG9yaWdpbiBBIHZlY3RvciB0aGF0IHJlcHJlc2VudHMgdGhlIG9yaWdpbiBmb3IgdGhlIGNhc3RlZCBzaGFkb3dzLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGJvdW5kcyBBbiBhbm9ueW1vdXMgb2JqZWN0IHdpdGggcHJvcGVydGllcyB0b3BsZWZ0IGFuZCBib3R0b20gcmlnaHQgcmVwcmVzZW50aW5nXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBjb3JuZXJzIG9mIHRoZSBib3VuZGFyeS5cclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGYgVGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC5cclxuICAgICAqL1xyXG4gICAgX2ZvckVhY2hWaXNpYmxlRWRnZXMob3JpZ2luLCBib3VuZHMsIGYpIHtcclxuICAgICAgICB2YXIgYSA9IHRoaXMub3B0aW9ucy5wb2ludHNbdGhpcy5vcHRpb25zLnBvaW50cy5sZW5ndGggLSAxXSxcclxuICAgICAgICAgICAgYlxyXG4gICAgICAgIGZvciAodmFyIHAgPSAwLCBsID0gdGhpcy5vcHRpb25zLnBvaW50cy5sZW5ndGg7IHAgPCBsOyArK3AsIGEgPSBiKSB7XHJcbiAgICAgICAgICAgIGIgPSB0aGlzLm9wdGlvbnMucG9pbnRzW3BdXHJcbiAgICAgICAgICAgIGlmIChhLmluQm91bmQoYm91bmRzLnRvcGxlZnQsIGJvdW5kcy5ib3R0b21yaWdodCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmlnaW5Ub0EgPSBhLnN1YihvcmlnaW4pXHJcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luVG9CID0gYi5zdWIob3JpZ2luKVxyXG4gICAgICAgICAgICAgICAgdmFyIGFUb0IgPSBiLnN1YihhKVxyXG4gICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBWZWMyKGFUb0IueSwgLWFUb0IueClcclxuICAgICAgICAgICAgICAgIGlmIChub3JtYWwuZG90KG9yaWdpblRvQSkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZihhLCBiLCBvcmlnaW5Ub0EsIG9yaWdpblRvQiwgYVRvQilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9seWdvbk9iamVjdCIsImltcG9ydCBWZWMyIGZyb20gJy4vVmVjMi5qcydcclxuaW1wb3J0IFBvbHlnb25PYmplY3QgZnJvbSAnLi9Qb2x5Z29uT2JqZWN0LmpzJ1xyXG5cclxuLyoqXHJcbiAqIEEgcmVjdGFuZ3VsYXIsIG9wcWF1ZSBvYmplY3QuXHJcbiAqL1xyXG5jbGFzcyBSZWN0YW5nbGVPYmplY3QgZXh0ZW5kcyBQb2x5Z29uT2JqZWN0IHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIFJlY3RhbmdsZU9iamVjdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyB0byBiZSBhcHBsaWVkIHRvIHRoaXMgUmVjdGFuZ2xlT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBzdXBlcihvcHRpb25zKVxyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQSB2ZWN0b3IgdGhhdCBpcyB0aGUgdG9wLWxlZnQgb2YgdGhlIHJlY3RhbmdsZS5cclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHRvcGxlZnRcclxuICAgICAgICAgICAgICogQHR5cGUgVmVjMlxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCBuZXcgVmVjMigpXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0b3BsZWZ0OiBuZXcgVmVjMigpLFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEEgdmVjdG9yIHRoYXQgaXMgdGhlIGJvdHRvbS1yaWdodCBvZiB0aGUgcmVjdGFuZ2xlLlxyXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkgYm90dG9tcmlnaHRcclxuICAgICAgICAgICAgICogQHR5cGUgVmVjMlxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCBuZXcgVmVjMigpXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBib3R0b21yaWdodDogbmV3IFZlYzIoKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRzLCB0aGlzLm9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5zeW5jRnJvbVRvcGxlZnRCb3R0b21yaWdodCgpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgcG9pbnRzIGRlZmluaW5nIHRoaXMgcmVjdGFuZ2xlIGJhc2VkIG9uIGl0cyBzcGVjaWZpZWQgYm91bmRzLlxyXG4gICAgICovXHJcbiAgICBzeW5jRnJvbVRvcGxlZnRCb3R0b21yaWdodCgpIHtcclxuICAgICAgICB2YXIgYSA9IHRoaXMub3B0aW9ucy50b3BsZWZ0XHJcbiAgICAgICAgdmFyIGIgPSBuZXcgVmVjMih0aGlzLm9wdGlvbnMuYm90dG9tcmlnaHQueCwgdGhpcy5vcHRpb25zLnRvcGxlZnQueSlcclxuICAgICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5ib3R0b21yaWdodFxyXG4gICAgICAgIHZhciBkID0gbmV3IFZlYzIodGhpcy5vcHRpb25zLnRvcGxlZnQueCwgdGhpcy5vcHRpb25zLmJvdHRvbXJpZ2h0LnkpXHJcbiAgICAgICAgdGhpcy5vcHRpb25zLnBvaW50cyA9IFthLCBiLCBjLCBkXVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhd3MgdGhpcyByZWN0YW5nbGUgb250byB0aGUgZ2l2ZW4gY29udGV4dFxyXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJDb250ZXh0MkR9IGN0eCBUaGUgY2FudmFzIGNvbnRleHQgb250byB3aGljaCB0aGUgcmVjdGFuZ2xlIHNob3VsZCBiZSBkcmF3bi5cclxuICAgICAqL1xyXG4gICAgZmlsbChjdHgpIHtcclxuICAgICAgICB2YXIgeCA9IHRoaXMub3B0aW9ucy5wb2ludHNbMF0ueCwgeSA9IHRoaXMub3B0aW9ucy5wb2ludHNbMF0ueVxyXG4gICAgICAgIGN0eC5yZWN0KHgsIHksIHRoaXMub3B0aW9ucy5wb2ludHNbMl0ueCAtIHgsIHRoaXMub3B0aW9ucy5wb2ludHNbMl0ueSAtIHkpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlY3RhbmdsZU9iamVjdCIsImltcG9ydCBQb2x5Z29uT2JqZWN0IGZyb20gJy4vUG9seWdvbk9iamVjdC5qcydcclxuaW1wb3J0IFZlYzIgZnJvbSAnLi9WZWMyLmpzJ1xyXG5cclxuLyoqXHJcbiAqIEFuIG9wYXF1ZSBsaW5lIG9iamVjdC5cclxuICovXHJcbmNsYXNzIExpbmVPYmplY3QgZXh0ZW5kcyBQb2x5Z29uT2JqZWN0IHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIExpbmVPYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIHRvIGJlIGFwcGxpZWQgdG8gdGhlIExpbmVPYmplY3RcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIHN1cGVyKG9wdGlvbnMpXHJcbiAgICAgICAgY29uc3QgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBBIHZlY3RvciB0aGF0IGlzIHRoZSBzdGFydCBwb2ludCBvZiB0aGUgbGluZS5cclxuICAgICAgICAgICAgICogQHByb3BlcnR5IGFcclxuICAgICAgICAgICAgICogQHR5cGUgVmVjMlxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCBWZWMyKClcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGE6IG5ldyBWZWMyKCksXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQSB2ZWN0b3IgdGhhdCBpcyB0aGUgbGFzdCBwb2ludCBvZiB0aGUgbGluZS5cclxuICAgICAgICAgICAgICogQHByb3BlcnR5IGJcclxuICAgICAgICAgICAgICogQHR5cGUgVmVjMlxyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCBWZWMyKClcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGI6IG5ldyBWZWMyKClcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgdGhpcy5vcHRpb25zKVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc3luY0Zyb21BQigpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgcG9pbnRzIGRlZmluaW5nIHRoaXMgbGluZSBiYXNlZCBvbiBpdHMgb3B0aW9ucy5cclxuICAgICAqL1xyXG4gICAgc3luY0Zyb21BYigpIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMucG9pbnRzID0gW3RoaXMub3B0aW9ucy5hLCB0aGlzLm9wdGlvbnMuYl1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTGluZU9iamVjdCJdLCJuYW1lcyI6WyJWZWMyIiwieCIsInkiLCJ0aGlzIiwidiIsIm4iLCJtdWwiLCJkeCIsImR5IiwibGVuZ3RoIiwiTWF0aCIsInNxcnQiLCJsZW5ndGgyIiwidG9wTGVmdCIsImJvdHRvbVJpZ2h0IiwiXzJQSSIsIlBJIiwicGF0aCIsImN0eCIsInBvaW50cyIsImRvbnRKb2luTGFzdCIsInAiLCJtb3ZlVG8iLCJpIiwibCIsImxpbmVUbyIsImNyZWF0ZUNhbnZhc0FuZDJkQ29udGV4dCIsImlkIiwidyIsImgiLCJpaWQiLCJjYW52YXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlRWxlbWVudCIsIndpZHRoIiwiaGVpZ2h0Iiwic3R5bGUiLCJkaXNwbGF5IiwiYm9keSIsImFwcGVuZENoaWxkIiwiZ2V0Q29udGV4dCIsImNsZWFyUmVjdCIsImdldFJHQkEiLCJjb2xvciIsImFscGhhIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJkIiwiZ2V0SW1hZ2VEYXRhIiwiZGF0YSIsImdldFRhbjIiLCJyYWRpdXMiLCJjZW50ZXIiLCJ5MCIsImxlbjIiLCJzb2xuIiwiZXBzaWxvbiIsInNvbHV0aW9ucyIsImEiLCJ4MCIsImFyZ3VtZW50cyIsImxlbjJhIiwidHQiLCJhY29zIiwibnQiLCJ0dF9jb3MiLCJjb3MiLCJ0dF9zaW4iLCJzaW4iLCJudF9jb3MiLCJudF9zaW4iLCJwdXNoIiwiZGlzdDAiLCJkaXN0MSIsImFicyIsImRpc3QyIiwiZGlzdDMiLCJMaWdodCIsIm9wdGlvbnMiLCJkZWZhdWx0cyIsIk9iamVjdCIsImFzc2lnbiIsImMiLCJfZ2V0VmlzaWJsZU1hc2tDYWNoZSIsImRyYXdJbWFnZSIsInJvdW5kIiwicG9zaXRpb24iLCJkaXN0YW5jZSIsImYiLCJmbG9vciIsImhhc2giLCJ2aXNtYXNraGFzaCIsIl92aXNtYXNrY2FjaGUiLCJnIiwiY3JlYXRlUmFkaWFsR3JhZGllbnQiLCJhZGRDb2xvclN0b3AiLCJkaWZmdXNlIiwidG9TdHJpbmciLCJMaWdodGluZyIsIl9jYWNoZSIsIl9jYXN0Y2FjaGUiLCJjdHhvdXRwdXQiLCJsaWdodCIsInNhbXBsZXMiLCJib3VuZHMiLCJvYmplY3RzIiwiZm9yRWFjaFNhbXBsZSIsIm8iLCJjb250YWlucyIsInRvcGxlZnQiLCJib3R0b21yaWdodCIsImZvckVhY2giLCJvYmplY3QiLCJjYXN0IiwidW5kZWZpbmVkIiwiYmVnaW5QYXRoIiwiZmlsbCIsImNyZWF0ZUNhY2hlIiwic2F2ZSIsInJlbmRlciIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsInJlc3RvcmUiLCJMYW1wIiwiX3RoaXMiLCJhbmdsZSIsInJvdWdobmVzcyIsIm9yaWVudGF0aW9uQ2VudGVyIiwiaGFzaGNvZGUiLCJfZ2V0SGFzaENhY2hlIiwiX2NhY2hlSGFzaGNvZGUiLCJfZ2NhY2hlIiwiRCIsImNhY2hlIiwibWluIiwiX2dldEdyYWRpZW50Q2FjaGUiLCJPcGFxdWVPYmplY3QiLCJ1bmlxdWVJZCIsIkRpc2NPYmplY3QiLCJvcmlnaW4iLCJtIiwib3JpZ2luVG9NIiwic3ViIiwidGFuZ2VudExpbmVzIiwib3JpZ2luVG9BIiwib3JpZ2luVG9CIiwiYWRkIiwiYiIsIm5vcm1hbGl6ZSIsIm9hbSIsIm9ibSIsImFwIiwiYnAiLCJzdGFydCIsImF0YW4yIiwiYXJjIiwicG9pbnQiLCJQb2x5Z29uT2JqZWN0IiwiY29weSIsImoiLCJvZGROb2RlcyIsIl9mb3JFYWNoVmlzaWJsZUVkZ2VzIiwiYVRvQiIsInQiLCJpbnYiLCJkb3QiLCJpbkJvdW5kIiwiUmVjdGFuZ2xlT2JqZWN0Iiwic3luY0Zyb21Ub3BsZWZ0Qm90dG9tcmlnaHQiLCJyZWN0IiwiTGluZU9iamVjdCIsInN5bmNGcm9tQUIiXSwibWFwcGluZ3MiOiJrc0NBUU1BLHdCQU1VQyxFQUFHQyxrQkFDTkQsRUFBSUEsR0FBSyxPQUNUQyxFQUFJQSxHQUFLLGtEQVFQLElBQUlGLEVBQUtHLEtBQUtGLEVBQUdFLEtB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
